all:
  vars:
    # Use python3 on all hosts
    ansible_python_interpreter: /usr/bin/python3
    nfs_server: false
    container_registry: 10.0.0.11:5000
    docker_node_labels:
      lenovo:
        # These labels were used when I was using docker swarm
        - logs=true
        - s3=true
    # k3s stuff
    k3s_version: v1.26.3+k3s1
    k3s_server_location: /var/lib/rancher/k3s
    k3s_master_ip: "{{ hostvars[groups['k3s_master'][0]]['ansible_host'] }}"
    k3s_config:
      node-label:
        - hrry.me/env=prd
    systemd_dir: /etc/systemd/system

  hosts:
    laptop: { ansible_host: 10.0.0.11, ansible_ssh_user: harry }
    lenovo:
      ansible_host: 10.0.0.13
      ansible_ssh_user: harry
      k3s_config:
        node-label:
          - hrry.me/env=prd
          - hrry.me/node-size=big
    rpi1: { ansible_host: 10.0.0.21 }
    rpi2: { ansible_host: 10.0.0.22 }
    rpi3: { ansible_host: 10.0.0.23, nfs_server: false }
    rpi0: { ansible_host: 10.0.0.40, ansible_ssh_user: pi }
    router:
      ansible_host: router.lan
      ansible_ssh_user: admin
      ansible_connection: ansible.netcommon.network_cli
      ansible_network_os: community.routeros.routeros

  children:
    ubuntu:
      hosts:
        laptop:
        lenovo:

    raspberrypi:
      vars:
        ansible_ssh_user: pi
      hosts:
        rpi1:
        rpi2:
        rpi3:

    prod:
      children:
        ubuntu:
        raspberrypi:

    k3s_master:
      hosts:
        laptop:

    k3s_workers:
      hosts:
        lenovo:
      children:
        raspberrypi:

    k3s_cluster:
      children:
        k3s_master:
        k3s_workers:
